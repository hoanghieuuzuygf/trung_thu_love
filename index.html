<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trung Thu Gửi Em</title>
  <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
    body {
      font-family: 'Ma Shan Zheng', cursive;
      background: linear-gradient(to bottom, #000000, #0a0a2a, #000000);
      color: #fff;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      position: fixed;
      touch-action: manipulation;
    }
    .hidden {display:none;}
    .firefly {
      position: absolute;
      width: 3px;
      height: 3px;
      background: #e6ff00;
      border-radius: 50%;
      filter: blur(1px);
      box-shadow: 0 0 8px #e6ff00, 0 0 15px #e6ff00;
      z-index: 2;
    }
    .lantern {
      position: absolute;
      width: 25px;
      height: 35px;
      background: radial-gradient(ellipse at center, #ff6600 0%, #cc3300 70%);
      border-radius: 50% 50% 40% 40%;
      animation: float 8s linear infinite;
      opacity: 0.8;
      z-index: 1;
    }
    @keyframes float {
      0% {transform: translateY(100vh) scale(1);}
      100% {transform: translateY(-20vh) scale(1.1);}
    }
    .message-line {
      position: absolute;
      font-size: clamp(1rem,4vw,1.8rem);
      color: transparent;
      text-align: center;
      width: 90%;
      left: 5%;
      z-index: 3;
      text-shadow: none;
      transition: all 2s ease-in-out;
      opacity: 0;
      line-height: 1.4;
    }
    .message-line.revealed {
      color: #ffd700;
      text-shadow: 0 0 8px rgba(255,215,0,0.8), 0 0 15px rgba(255,100,100,0.6);
      opacity: 1;
    }
    .music-control {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: rgba(255,215,0,0.3);
      color: #ffd700;
      border: 2px solid rgba(255,215,0,0.6);
      padding: 10px 16px;
      border-radius: 20px;
      cursor: pointer;
      z-index: 100;
      font-family: 'Ma Shan Zheng', cursive;
      font-size: 0.9rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      display:none;
    }
    .music-control:hover {background: rgba(255,215,0,0.4);}
    .start-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 300;
      flex-direction: column;
      text-align: center;
    }
    .start-text {
      color: #ffd700;
      font-size: 1.6rem;
      animation: pulse 2s infinite;
      padding: 0 15px;
    }
    @keyframes pulse {
      0%,100%{opacity:0.7;transform:scale(1);}
      50%{opacity:1;transform:scale(1.05);}
    }
  </style>
</head>
<body>
  <!-- Màn hình chờ -->
  <div class="start-screen" id="startScreen">
    <div class="start-text">💛 Bấm để phát nhạc và bắt đầu 💛</div>
  </div>

  <div class="message-line" id="line1" style="top: 10%;">Tết Trung Thu năm nay anh với vợ phải tạm xa nhau một chút...</div>
  <div class="message-line" id="line2" style="top: 22%;">Nhưng lòng anh thì vẫn hướng về vợ từng phút giây.</div>
  <div class="message-line" id="line3" style="top: 34%;">Vợ có nhớ anh không? Có còn yêu anh nhiều như trước?</div>
  <div class="message-line" id="line4" style="top: 46%;">Anh nhớ nụ cười, ánh mắt, và tất cả của vợ...</div>
  <div class="message-line" id="line5" style="top: 58%;">Rồi mình sẽ sớm ở bên nhau thôi, yêu vợ nhiều lắm 💛</div>
  <div class="message-line" id="line6" style="top: 70%;">Chúc vợ Trung Thu thật vui và luôn nhớ anh nha 🌙</div>
  <div class="message-line" id="line7" style="top: 82%;">Yêu em nhất trên đời này 💖</div>

  <button class="music-control" id="musicControl"><span>🎵</span> Tắt nhạc</button>

  <audio id="bgMusic" preload="auto" loop>
    <source src="tik.mp3" type="audio/mpeg">
  </audio>

  <script>
    const lines = ['line1','line2','line3','line4','line5','line6','line7'];
    const startScreen=document.getElementById('startScreen');
    const bgMusic=document.getElementById('bgMusic');
    const musicControl=document.getElementById('musicControl');
    let musicPlaying=false;

    // Tạo đom đóm
    function createFireflies(){
      const n=window.innerWidth<768?25:40;
      for(let i=0;i<n;i++){
        const f=document.createElement('div');
        f.className='firefly';
        f.style.left=`${Math.random()*100}%`;
        f.style.top=`${Math.random()*100}%`;
        document.body.appendChild(f);
      }
    }

    // Tạo đèn lồng
    function createLanterns(){
      const n=window.innerWidth<768?8:15;
      for(let i=0;i<n;i++){
        const l=document.createElement('div');
        l.className='lantern';
        l.style.left=`${Math.random()*100}%`;
        l.style.animationDelay=`${Math.random()*8}s`;
        l.style.animationDuration=`${6+Math.random()*6}s`;
        document.body.appendChild(l);
      }
    }

    // Hiện dòng chữ dần dần
    function showMessages(){
      lines.forEach((id,i)=>{
        setTimeout(()=>{
          document.getElementById(id).classList.add('revealed');
        }, i*3000);
      });
    }

    // Khi bấm bắt đầu
    startScreen.addEventListener('click',()=>{
      bgMusic.volume=0.7;
      bgMusic.play().then(()=>{
        startScreen.classList.add('hidden'); // Ẩn dòng "Bấm để phát nhạc"
        createFireflies();
        createLanterns();
        showMessages();
        musicControl.style.display='block';
        musicPlaying=true;
      }).catch(err=>{
        alert("⚠️ Trình duyệt chặn phát nhạc, hãy bấm lại để bắt đầu nhé!");
      });
    });

    // Nút bật/tắt nhạc
    musicControl.addEventListener('click',()=>{
      if(musicPlaying){
        bgMusic.pause();
        musicControl.innerHTML='<span>🔇</span> Bật nhạc';
      } else {
        bgMusic.play();
        musicControl.innerHTML='<span>🎵</span> Tắt nhạc';
      }
      musicPlaying=!musicPlaying;
    });
  </script>
</body>
</html>
